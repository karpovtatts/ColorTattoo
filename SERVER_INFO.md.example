# üìã –ü–∞–º—è—Ç–∫–∞ –ø–æ –¥–µ–ø–ª–æ—é ColorTattoo

## üñ•Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

- **IP**: YOUR_SERVER_IP
- **–î–æ–º–µ–Ω**: YOUR_DOMAIN
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: **YOUR_USER**
- **–ü—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**: `/path/to/colortattoo`
- **URL**: `https://YOUR_DOMAIN/colortattoo`

---

## üöÄ –î–µ–ø–ª–æ–π (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)

### 1. –õ–æ–∫–∞–ª—å–Ω–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ base path

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.production` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
VITE_BASE_PATH=/colortattoo/
```

### 2. –õ–æ–∫–∞–ª—å–Ω–æ: –°–±–æ—Ä–∫–∞

```powershell
npm run build
```

–°–æ–∑–¥–∞—Å—Ç—Å—è –ø–∞–ø–∫–∞ `dist/` —Å —Å–æ–±—Ä–∞–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏.

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ dist —á–µ—Ä–µ–∑ WinSCP

- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É: `YOUR_USER@YOUR_SERVER_IP`
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å—é –ø–∞–ø–∫—É `dist/` –≤ `/path/to/colortattoo/`
- **–í–∞–∂–Ω–æ:** –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `dist/`, –∞ –Ω–µ —Å–∞–º—É –ø–∞–ø–∫—É `dist`

### 4. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ Putty: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ nginx (–æ–¥–∏–Ω —Ä–∞–∑)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ nginx:**

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh YOUR_USER@YOUR_SERVER_IP

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º nginx –∫–æ–Ω—Ñ–∏–≥ (–Ω—É–∂–Ω—ã –ø—Ä–∞–≤–∞ root, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ–º sudo)
sudo nano /etc/nginx/sites-available/YOUR_CONFIG_FILE
```

**–í–∞–∂–Ω–æ:** –î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è nginx –∫–æ–Ω—Ñ–∏–≥–∞ –Ω—É–∂–Ω—ã –ø—Ä–∞–≤–∞ root (sudo).

–ó–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –Ω–∞ –ø–æ–ª–Ω—ã–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –Ω–∏–∂–µ (–∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫–∏ ColorTattoo):

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ö–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –∫–æ–¥ –º–µ–∂–¥—É ```nginx –∏ ```, –ë–ï–ó —Å–∞–º–∏—Ö —ç—Ç–∏—Ö —Å—Ç—Ä–æ–∫! –≠—Ç–æ markdown —Ä–∞–∑–º–µ—Ç–∫–∞, –Ω–µ –∫–æ–¥ nginx!

**–ü–æ–ª–Ω—ã–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π nginx –∫–æ–Ω—Ñ–∏–≥:**

```nginx
server {
    server_name YOUR_DOMAIN;

    # ===== ColorTattoo Frontend =====
    location /colortattoo {
        alias /path/to/colortattoo/dist;
        index index.html;
        try_files $uri $uri/ @colortattoo_fallback;
        
        add_header Cache-Control "no-cache, no-store, must-revalidate" always;
        add_header Pragma "no-cache" always;
    }

    location @colortattoo_fallback {
        rewrite ^/colortattoo/(.*)$ /colortattoo/index.html last;
    }

    # –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ ColorTattoo (JS, CSS)
    location ~ ^/colortattoo/assets/.*\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        alias /path/to/colortattoo/dist;
        expires 1y;
        add_header Cache-Control "public, immutable";
        access_log off;
    }

    # –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ ColorTattoo (vite.svg –∏ —Ç.–¥.)
    location ~ ^/colortattoo/.*\.(svg|ico|png|jpg|jpeg|gif|woff|woff2|ttf|eot)$ {
        alias /path/to/colortattoo/dist;
        expires 1y;
        add_header Cache-Control "public, immutable";
        access_log off;
    }

    # ===== –î—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è =====
    # –î–æ–±–∞–≤—å—Ç–µ –∑–¥–µ—Å—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

    listen 443 ssl;
    ssl_certificate /path/to/ssl/fullchain.pem;
    ssl_certificate_key /path/to/ssl/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
}

server {
    if ($host = YOUR_DOMAIN) {
        return 301 https://$host$request_uri;
    }

    listen 80;
    server_name YOUR_DOMAIN;
    return 404;
}
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ:

```bash
sudo nginx -t
sudo systemctl reload nginx
sudo chown -R YOUR_USER:YOUR_USER /path/to/colortattoo
sudo chmod -R 755 /path/to/colortattoo
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –õ–æ–∫–∞–ª—å–Ω–æ: –°–±–æ—Ä–∫–∞

```powershell
npm run build
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ dist —á–µ—Ä–µ–∑ WinSCP

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –ø–∞–ø–∫—É `dist/` –≤ `/path/to/colortattoo/` (–∑–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã).

### 3. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ Putty: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Git (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ï—Å–ª–∏ git –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑:

```bash
ssh YOUR_USER@YOUR_SERVER_IP
cd /path/to/colortattoo

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git init

# –î–æ–±–∞–≤–ª—è–µ–º remote (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
git remote add origin https://github.com/YOUR_USERNAME/ColorTattoo.git
# –∏–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ SSH:
# git remote add origin git@github.com:YOUR_USERNAME/ColorTattoo.git

# –°–æ–∑–¥–∞–µ–º –≤–µ—Ç–∫—É main
git branch -M main

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω–æ–π –≤–µ—Ç–∫–∏
git branch --set-upstream-to=origin/main main

# –ü–µ—Ä–≤—ã–π —Ä–∞–∑: –ø–æ–ª—É—á–∞–µ–º —Ñ–∞–π–ª—ã
# –ï—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —É–∂–µ –µ—Å—Ç—å —Ñ–∞–π–ª—ã (dist), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
git pull origin main --allow-unrelated-histories

# –ï—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç, –ø—Ä–æ—Å—Ç–æ:
# git pull origin main
```

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

```bash
ssh YOUR_USER@YOUR_SERVER_IP
cd /path/to/colortattoo
git pull origin main
```

**–ì–æ—Ç–æ–≤–æ!** Nginx —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- **Base path –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω**: –ë–µ–∑ `VITE_BASE_PATH=/colortattoo/` –≤ `.env.production` –Ω–∏—á–µ–≥–æ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- **–°–±–æ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ**: –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `npm run build`
- **–†–∞–±–æ—Ç–∞ –æ—Ç YOUR_USER**: –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –æ—Ç –Ω—É–∂–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üêõ –ü—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞ 500 Internal Server Error

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ nginx:**
```bash
sudo tail -50 /var/log/nginx/error.log
```

**–ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –≤ alias** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—É—Ç—å `/path/to/colortattoo` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. **–ù–µ—Ç —Ñ–∞–π–ª–æ–≤** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:
   ```bash
   ls -la /path/to/colortattoo
   ```
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   ```bash
   sudo chown -R YOUR_USER:YOUR_USER /path/to/colortattoo
   sudo chmod -R 755 /path/to/colortattoo
   ```
4. **–û—à–∏–±–∫–∞ –≤ nginx –∫–æ–Ω—Ñ–∏–≥–µ** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:
   ```bash
   sudo nginx -t
   ```

### –ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω / 404

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `dist/index.html` –≤—Å–µ –ø—É—Ç–∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `/colortattoo/`
2. –ï—Å–ª–∏ –Ω–µ—Ç - –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å `.env.production` —Å `VITE_BASE_PATH=/colortattoo/`

### 403 Forbidden

```bash
sudo chown -R YOUR_USER:YOUR_USER /path/to/colortattoo
sudo chmod -R 755 /path/to/colortattoo
```

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–ª–æ–∫–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (—Å–º. –≤—ã—à–µ).

---

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ls -la /path/to/colortattoo

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å nginx
sudo nginx -t
sudo systemctl reload nginx

# –õ–æ–≥–∏ nginx
sudo tail -f /var/log/nginx/error.log
```

